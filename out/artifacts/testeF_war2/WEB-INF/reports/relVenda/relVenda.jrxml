<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relVenda" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5c5c87a2-98a7-42fb-b79b-8353efa76157">
	<property name="ireport.zoom" value="1.331000000000001"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Joao\\Desktop\\io\\src\\main\\webapp\\WEB-INF\\reports\\relVenda\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="dataI" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="dataF" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="condicao" class="java.lang.String"/>
	<queryString>
		<![CDATA[select v.id, v.valortotalp as valorServ, valortotals as valorProd,
       v.valortotal as valorTotal, c.nome as cliNome, c.sobrenome,
       c.telefone as telefone, v.datavenda, itv.id, its.id

from vendas v
         INNER join cliente c on c.id = v.cliente_id


         LEFT JOIN itensservico AS its ON v.id=its.id
         LEFT JOIN servico AS serv ON serv.id=its.id

         LEFT JOIN itensvenda AS itv ON v.id=itv.id
         LEFT JOIN pecas AS prod ON prod.id=itv.id
where date(v.datavenda) between $P{dataI} and $P{dataF}
$P!{condicao}
GROUP BY v.id, c.nome, c.sobrenome, c.telefone, itv.id, its.id
order by v.datavenda DESC, v.id]]>
	</queryString>
	<field name="id" class="java.lang.Long"/>
	<field name="valorserv" class="java.lang.Double"/>
	<field name="valorprod" class="java.lang.Double"/>
	<field name="valortotal" class="java.lang.Double"/>
	<field name="clinome" class="java.lang.String"/>
	<field name="sobrenome" class="java.lang.String"/>
	<field name="telefone" class="java.lang.String"/>
	<field name="datavenda" class="java.sql.Timestamp"/>
	<group name="cliente" keepTogether="true">
		<groupExpression><![CDATA[$F{id}]]></groupExpression>
		<groupHeader>
			<band height="37">
				<rectangle>
					<reportElement x="0" y="15" width="555" height="20" uuid="b654d400-0047-4dfe-8c44-6814481e972d"/>
				</rectangle>
				<rectangle>
					<reportElement x="466" y="15" width="89" height="20" uuid="e8b465cd-54eb-441d-8063-58ff18fae064"/>
				</rectangle>
				<rectangle>
					<reportElement x="371" y="15" width="89" height="20" uuid="6e04af75-c04b-4db7-886f-cfeffd0f3ff6"/>
				</rectangle>
				<staticText>
					<reportElement mode="Opaque" x="6" y="9" width="84" height="12" uuid="b3472fe2-dd16-43bf-88cd-9c857b3cc2e9"/>
					<box leftPadding="0">
						<pen lineWidth="0.75"/>
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true" isUnderline="false" isStrikeThrough="false"/>
					</textElement>
					<text><![CDATA[CLIENTE]]></text>
				</staticText>
				<textField isStretchWithOverflow="true">
					<reportElement stretchType="RelativeToBandHeight" x="18" y="21" width="337" height="13" uuid="5f3a66c0-f02e-461e-adbe-c6b3ad09ee71"/>
					<textElement verticalAlignment="Bottom">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{clinome} + " " + $F{sobrenome}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement mode="Opaque" x="483" y="9" width="65" height="12" uuid="82ef1df0-49c7-4bea-adc9-6a08d8f63c09"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[DATA]]></text>
				</staticText>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="467" y="21" width="88" height="13" uuid="e5ed862b-7eac-4daf-b5fc-5e681721a88c"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{datavenda}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement mode="Opaque" x="376" y="9" width="79" height="12" uuid="feaaea29-0e85-491e-bfa2-ee62d8fad51e"/>
					<box leftPadding="0">
						<pen lineWidth="0.75"/>
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true" isUnderline="false" isStrikeThrough="false"/>
					</textElement>
					<text><![CDATA[VENDA ID]]></text>
				</staticText>
				<textField pattern="">
					<reportElement x="371" y="22" width="84" height="13" uuid="f6de001f-1308-433a-ae4a-bd1c2578d84f"/>
					<textElement textAlignment="Center" verticalAlignment="Bottom">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="70">
			<frame>
				<reportElement mode="Opaque" x="-20" y="-20" width="595" height="90" backcolor="#006699" uuid="a32490ab-4c9b-4e9e-8cc0-e21e9e85db26"/>
				<staticText>
					<reportElement x="20" y="20" width="339" height="43" forecolor="#FFFFFF" uuid="d3908390-b5ec-4f12-9e8e-56619252b567"/>
					<textElement>
						<font size="34" isBold="true"/>
					</textElement>
					<text><![CDATA[RelÃ¡torio de vendas]]></text>
				</staticText>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band height="13"/>
	</pageHeader>
	<detail>
		<band height="20">
			<subreport>
				<reportElement x="0" y="0" width="556" height="13" isRemoveLineWhenBlank="true" uuid="702cd161-9fb1-4d22-b623-450301e05791"/>
				<subreportParameter name="VENDA_ID">
					<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "relItensVenda.jasper"]]></subreportExpression>
			</subreport>
		</band>
		<band height="20">
			<subreport>
				<reportElement x="0" y="0" width="557" height="12" isRemoveLineWhenBlank="true" uuid="9f9d8cc9-ef47-4d01-b518-ceb544a61a50"/>
				<subreportParameter name="VENDA_ID">
					<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "relItensServico.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<pageFooter>
		<band height="17">
			<textField>
				<reportElement mode="Opaque" x="0" y="4" width="515" height="13" backcolor="#E6E6E6" uuid="d9b38353-81bc-4777-8b33-07b497510ebb"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Pagina "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement mode="Opaque" x="515" y="4" width="40" height="13" backcolor="#E6E6E6" uuid="b8487cde-468b-4a15-bdba-576314d0bd29"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="4" width="100" height="13" uuid="51bed243-a872-455d-b481-db1952c9ceee"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
